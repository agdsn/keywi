(function(){var e={91770:function(e,t,n){"use strict";n(66992),n(88674),n(19601),n(17727);var a=n(20144),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-main",[n("router-view")],1)],1)},o=[],i=a.Z.extend({name:"App",data:function(){return{}}}),l=i,s=n(1001),c=n(43453),u=n.n(c),d=n(17524),f=n(81009),m=(0,s.Z)(l,r,o,!1,null,null,null),v=m.exports;u()(m,{VApp:d.Z,VMain:f.Z});var p=n(78345),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("app-title",{attrs:{"view-title":"Schlüssel"}}),n("app-nav-bar"),n("key-table",{ref:"keyTable"}),n("v-divider",{staticClass:"mx-8"}),n("form-popup",{attrs:{text:"Schlüssel hinzufügen"}},[n("edit-key-form",{staticClass:"mx-8 my-4",on:{submit:function(t){return e.$refs.keyTable.loadData()}}})],1)],1)},g=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(" "+e._s(e.viewTitle)+" ")])])},x=[],k=a.Z.extend({name:"AppTitle",props:["viewTitle"]}),_=k,w=(0,s.Z)(_,b,x,!1,null,"7bc69db0",null),Z=w.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav-bar"},[n("ul",{staticClass:"list left"},[n("li",[n("router-link",{attrs:{to:"/keys"}},[e._v("Schlüssel")])],1),n("li",[n("router-link",{attrs:{to:"/safe"}},[e._v("Tresore")])],1),n("li",[n("router-link",{attrs:{to:"/lock"}},[e._v("Schlösser")])],1),n("li",[n("router-link",{attrs:{to:"/location"}},[e._v("Orte")])],1)]),n("ul",{staticClass:"list"},[e.loggedIn?n("li",[n("a",{on:{click:e.logout}},[e._v("Logout")])]):n("li",[n("a",{on:{click:function(t){return e.$refs.loginDialog.openDialog()}}},[e._v("Login")])])]),n("form-popup",{ref:"loginDialog",attrs:{text:"Login","render-btn":!1}},[n("LoginForm",{on:{submit:this.checkLogin}})],1)],1)},S=[],L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[e.renderBtn?n("v-btn",e._g({staticClass:"primary-color mx-8 my-4",attrs:{text:""}},a),[e._v(" "+e._s(e.text)+" ")]):e._e()]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{on:{"save-form":e.closeDialog}},[n("v-card-title",[n("h2",[e._v(e._s(e.text))])]),n("v-card-text",{staticClass:"pb-10"},[e._t("default")],2)],1)],1)},$=[],T={name:"FormPopup",props:{text:String,renderBtn:{type:Boolean,default:!0}},data:function(){return{dialog:!1}},methods:{closeDialog:function(){this.dialog=!1},openDialog:function(){this.dialog=!0}}},I=T,D=n(680),R=n(53237),V=n(37118),A=n(67336),C=(0,s.Z)(I,L,$,!1,null,"6715fcb0",null),E=C.exports;u()(C,{VBtn:D.Z,VCard:R.Z,VCardText:V.ZB,VCardTitle:V.EB,VDialog:A.Z});var F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[null!=e.error?n("v-alert",{attrs:{color:"red",type:"success"}}):e._e(),n("v-form",{ref:"form"},[n("v-text-field",{attrs:{label:"Nutzername",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{label:"Passwort",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-btn",{attrs:{color:"validate"},on:{click:e.login}},[e._v(" Login ")])],1)],1)},O=[],B=n(16198),N=(n(35666),n(38862),n(80129)),z=n.n(N),P=n(28418),j=n.n(P),K={},M=localStorage.getItem("access_token");function q(){var e=new(j())({definition:"".concat("https://keywi.agdsn.de","/openapi.json"),withServer:"main",axiosConfigDefaults:{headers:K}}).init();return e}null!=M&&(K={Authorization:"Bearer ".concat(M)});var J=q(),U=n(9669),W=n.n(U),G={login:function(e,t){return(0,B.Z)(regeneratorRuntime.mark((function n(){var a,r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,J;case 2:a=n.sent,r={username:e,password:t},o=z().stringify(r),i={headers:{"content-type":"application/x-www-form-urlencoded"},data:o},a.auth_login(null,void 0,i).then((function(e){var t=e.data.access_token;localStorage.setItem("access_token",t);var n="Bearer ".concat(t);return W().defaults.headers.common.Authorization=n,a.defaults.headers.Authorization=n,a.user_getCurrent().then((function(e){localStorage.setItem("user",JSON.stringify(e.data))})),!0})).catch((function(e){throw console.log(e),e}));case 7:case"end":return n.stop()}}),n)})))()},logout:function(){return(0,B.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J;case 2:t=e.sent,localStorage.removeItem("access_token"),delete W().defaults.headers.common.Authorization,delete t.defaults.headers.Authorization;case 6:case"end":return e.stop()}}),e)})))()},isLoggedIn:function(){var e=null!=localStorage.getItem("access_token");return console.log("Logged in:"+e),e},getUser:function(){var e=localStorage.getItem("user");return null==e?null:JSON.parse(e)}},H={name:"LoginForm",data:function(){return{username:null,password:null,error:null}},methods:{login:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:G.login(e.username,e.password).then((function(){e.error=null,e.$refs.form.reset(),e.$parent.$emit("save-form"),e.$emit("submit")})).catch((function(t){e.error="Wrong username or password.",e.$emit("submit")}));case 1:case"end":return t.stop()}}),t)})))()}}},Q=H,X=n(51234),Y=n(46232),ee=n(55978),te=(0,s.Z)(Q,F,O,!1,null,"53198616",null),ne=te.exports;u()(te,{VAlert:X.Z,VBtn:D.Z,VForm:Y.Z,VTextField:ee.Z});var ae={name:"AppNavBar",components:{LoginForm:ne,FormPopup:E},data:function(){return{loggedIn:!1}},methods:{checkLogin:function(){var e=this;this.loggedIn=null!=localStorage.getItem("access_token"),setTimeout((function(){e.loggedIn=null!=localStorage.getItem("access_token")}),200),console.log(this.loggedIn),console.log(localStorage.getItem("access_token"))},logout:function(){G.logout(),this.checkLogin()}},beforeMount:function(){this.checkLogin()}},re=ae,oe=(0,s.Z)(re,y,S,!1,null,"4c32adfb",null),ie=oe.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{ref:"table",staticClass:"elevation-1",attrs:{headers:e.headers,items:e.tableData,"items-per-page":25,loading:e.loading,"loading-text":"Lade Daten...","item-class":e.row_classes},scopedSlots:e._u([{key:"item.lock.name",fn:function(t){var a=t.item;return[n("router-link",{attrs:{to:"/lock/"+a.lock.id}},[e._v(e._s(a.lock.name))])]}},{key:"item.safe.name",fn:function(t){var a=t.item;return[n("router-link",{attrs:{to:"/safe/"+a.safe.id}},[e._v(e._s(a.safe.name))])]}},{key:"item.location.name",fn:function(t){var a=t.item;return[n("router-link",{attrs:{to:"/location/"+a.location.id}},[e._v(e._s(a.location.name))])]}},{key:"item.rental",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.getRentalStatus(n))+" ")]}}],null,!0)})},se=[],ce=(n(41539),{name:"KeyTable",data:function(){return{loading:!0,headers:[{text:"Ort",value:"location.name"},{text:"Schloss",value:"lock.name"},{text:"Schlüsselnummer",value:"number"},{text:"Tresor",value:"safe.name"},{text:"Ausleihe",value:"rental"}],tableData:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.id,t.next=3,J;case 3:a=t.sent,n?a.key_getKey(n).then((function(t){e.tableData=[t.data],e.loading=!1})).finally((function(){e.loading=!1})):a.key_getKeys().then((function(t){e.tableData=t.data})).finally((function(){e.loading=!1}));case 5:case"end":return t.stop()}}),t)})))()},getRentalStatus:function(e){return e.active_rental?"Ausgeliehen":e.rentable?"Ausleihbar":"Nicht ausleihbar"},row_classes:function(e){return null==e.active_rental&&e.rentable?"green-cell":"red-cell"}},computed:{}}),ue=ce,de=n(46310),fe=(0,s.Z)(ue,le,se,!1,null,null,null),me=fe.exports;u()(fe,{VDataTable:de.Z});var ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form"},[n("v-select",{attrs:{items:e.locks,label:"Schloss","item-text":"displayName","item-value":"id",rules:e.lockRule},model:{value:e.selectedLockId,callback:function(t){e.selectedLockId=t},expression:"selectedLockId"}}),n("v-text-field",{attrs:{label:"Schlüsselnummer",rules:e.nameRules,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-select",{attrs:{items:e.safes,label:"Tresor","item-text":"displayName","item-value":"id",rules:e.safeRule},model:{value:e.selectedSafeId,callback:function(t){e.selectedSafeId=t},expression:"selectedSafeId"}}),n("v-checkbox",{attrs:{label:"Ausleihbar"},model:{value:e.rentable,callback:function(t){e.rentable=t},expression:"rentable"}}),n("v-btn",{attrs:{color:"validate"},on:{click:e.save}},[e._v(" Speichern ")])],1)},pe=[],he=(n(68309),n(54747),{name:"EditKeyForm",data:function(){return{name:"",locks:[],safes:[],selectedLockId:void 0,selectedSafeId:void 0,rentable:!0,nameRules:[function(e){return!!e||"Name erforderlich"}],lockRule:[function(e){return!!e||"Bitte Schloss auswählen"}],safeRule:[function(e){return!!e||"Bitte Tresor auswählen"}]}},mounted:function(){this.loadData()},methods:{save:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.$refs.form.validate()&&e.selectedLockId&&e.selectedSafeId)){t.next=6;break}return t.next=3,J;case 3:n=t.sent,a={number:e.name,lock_id:e.selectedLockId,safe_id:e.selectedSafeId,rentable:e.rentable},n.key_createKey(null,a).then((function(){e.$refs.form.reset(),e.$parent.$emit("save-form"),e.$emit("submit")}));case 6:case"end":return t.stop()}}),t)})))()},loadData:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J;case 2:n=t.sent,n.lock_getLocks().then((function(t){e.locks=t.data,e.locks.forEach((function(e){e.displayName=e.name+" ("+e.location.name+")"}))})).then(n.safe_getSafes).then((function(t){e.safes=t.data,e.safes.forEach((function(e){e.displayName=e.name+" ("+e.location.name+")"}))}));case 4:case"end":return t.stop()}}),t)})))()}}}),ge=he,be=n(69362),xe=n(45852),ke=(0,s.Z)(ge,ve,pe,!1,null,"130a16da",null),_e=ke.exports;u()(ke,{VBtn:D.Z,VCheckbox:be.Z,VForm:Y.Z,VSelect:xe.Z,VTextField:ee.Z});var we=a.Z.extend({name:"AllKeysView",components:{KeyTable:me,AppNavBar:ie,AppTitle:Z,FormPopup:E,EditKeyForm:_e}}),Ze=we,ye=n(11418),Se=(0,s.Z)(Ze,h,g,!1,null,"3cfe79f5",null),Le=Se.exports;u()(Se,{VDivider:ye.Z});var $e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("app-title",{attrs:{"view-title":"Tresor"}}),n("app-nav-bar"),n("safe-table",{ref:"safeTable",on:{editItem:e.editSafe}}),n("v-divider",{staticClass:"mx-8"}),n("form-popup",{ref:"popup",attrs:{text:"Tresor hinzufügen"}},[n("edit-safe-form",{ref:"form",staticClass:"mx-8 my-4 ",attrs:{"safe-template":e.safe},on:{submit:function(t){return e.$refs.safeTable.loadData()}}})],1)],1)},Te=[],Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{ref:"table",staticClass:"elevation-1",attrs:{headers:e.headers,items:e.tableData,"items-per-page":25,loading:e.loading,"loading-text":"Lade Daten..."},scopedSlots:e._u([{key:"item.location.name",fn:function(t){var a=t.item;return[n("router-link",{attrs:{to:"/location/"+a.location.id}},[e._v(e._s(a.location.name))])]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pencil ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}}],null,!0)})},De=[],Re={name:"SafeTable",data:function(){return{loading:!0,headers:[{text:"Tresor",value:"name"},{text:"Ort",value:"location.name"},{text:"Anzahl Schlüssel",value:"amount_keys"},{text:"Aktionen",value:"actions",sortable:!1}],tableData:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.id,t.next=3,J;case 3:a=t.sent,n?a.safe_getSafe(n).then((function(t){e.tableData=[t.data]})).finally((function(){e.loading=!1})):a.safe_getSafes().then((function(t){e.tableData=t.data,e.loading=!1})).finally((function(){e.loading=!1}));case 5:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.$emit("editItem",e)},deleteItem:function(e){return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J;case 2:n=t.sent,a={uuid:e.safe_id},n.safe_deleteSafe(a);case 5:case"end":return t.stop()}}),t)})))()}}},Ve=Re,Ae=n(96428),Ce=(0,s.Z)(Ve,Ie,De,!1,null,null,null),Ee=Ce.exports;u()(Ce,{VDataTable:de.Z,VIcon:Ae.Z});var Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form"},[n("v-text-field",{attrs:{label:"Name",rules:e.nameRules,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-select",{attrs:{items:e.locations,label:"Ort","item-text":"name","item-value":"id",rules:e.selectRule},model:{value:e.selectedLocationId,callback:function(t){e.selectedLocationId=t},expression:"selectedLocationId"}}),n("v-btn",{attrs:{color:"validate"},on:{click:e.save}},[e._v(" Speichern ")])],1)},Oe=[],Be={name:"EditSafeForm",props:["safeTemplate"],data:function(){return{name:"",locations:[],selectedLocationId:void 0,nameRules:[function(e){return!!e||"Name erforderlich"}],selectRule:[function(e){return!!e||"Bitte Ort auswählen"}],safeId:null}},mounted:function(){this.updateSafeTemplate(this.safeTemplate),this.loadLocations()},methods:{updateSafeTemplate:function(e){e&&(this.safeId=e.safe_id,this.name=e.safe_name,this.selectedLocationId=e.location_id)},save:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()||!e.selectedLocationId){t.next=5;break}return t.next=3,J;case 3:n=t.sent,e.safeId?(a={uuid:e.safeId},r={name:e.name,location_id:e.selectedLocationId},n.safe_editSafe(a,r).then((function(){e.$refs.form.reset(),e.$parent.$emit("save-form"),e.$emit("submit")}))):(o={name:e.name,location_id:e.selectedLocationId},n.safe_createSafe(null,o).then((function(){e.$refs.form.reset(),e.$emit("submit")})));case 5:case"end":return t.stop()}}),t)})))()},loadLocations:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J;case 2:n=t.sent,n.location_getLocations().then((function(t){e.locations=t.data}));case 4:case"end":return t.stop()}}),t)})))()}}},Ne=Be,ze=(0,s.Z)(Ne,Fe,Oe,!1,null,"093bdc68",null),Pe=ze.exports;u()(ze,{VBtn:D.Z,VForm:Y.Z,VSelect:xe.Z,VTextField:ee.Z});var je=a.Z.extend({name:"AllSafesView",components:{SafeTable:Ee,AppNavBar:ie,AppTitle:Z,FormPopup:E,EditSafeForm:Pe},data:function(){return{safe:void 0}},methods:{editSafe:function(e){this.safe=e,this.$refs.popup.openDialog(),this.$refs.form&&this.$refs.form.updateSafeTemplate(e)}}}),Ke=je,Me=(0,s.Z)(Ke,$e,Te,!1,null,"4ec243ba",null),qe=Me.exports;u()(Me,{VDivider:ye.Z});var Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("app-title",{attrs:{"view-title":"Schlösser"}}),n("app-nav-bar"),n("lock-table",{ref:"lockTable"}),n("v-divider",{staticClass:"mx-8"}),n("form-popup",{attrs:{text:"Schloss hinzufügen"}},[n("edit-lock-form",{staticClass:"mx-8 my-4 ",on:{submit:function(t){return e.$refs.lockTable.loadData()}}})],1)],1)},Ue=[],We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{ref:"table",staticClass:"elevation-1",attrs:{headers:e.headers,items:e.tableData,"items-per-page":25,loading:e.loading,"loading-text":"Lade Daten..."},scopedSlots:e._u([{key:"item.location.name",fn:function(t){var a=t.item;return[n("router-link",{attrs:{to:"/location/"+a.location.id}},[e._v(e._s(a.location.name))])]}},{key:"item.available_keys",fn:function(t){var n=t.item;return[e._v(" "+e._s(n.amount_free_keys)+" / "+e._s(n.amount_keys)+" ")]}}],null,!0)})},Ge=[],He={name:"LockTable",data:function(){return{loading:!0,headers:[{text:"Schloss",value:"name"},{text:"Ort",value:"location.name"},{text:"Besitzer",value:"owner"},{text:"Verfügbare Schlüssel",value:"available_keys"}],tableData:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.id,t.next=3,J;case 3:a=t.sent,n?a.lock_getLock(n).then((function(t){e.tableData=[t.data]})).finally((function(){e.loading=!1})):a.lock_getLocks().then((function(t){e.tableData=t.data,e.loading=!1})).finally((function(){e.loading=!1}));case 5:case"end":return t.stop()}}),t)})))()}}},Qe=He,Xe=(0,s.Z)(Qe,We,Ge,!1,null,null,null),Ye=Xe.exports;u()(Xe,{VDataTable:de.Z});var et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form"},[n("v-text-field",{attrs:{label:"Name",rules:e.nameRules,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{label:"Besitzer"},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}}),n("v-select",{attrs:{items:e.locations,label:"Ort","item-text":"name","item-value":"id",rules:e.selectRule},model:{value:e.selectedLocationId,callback:function(t){e.selectedLocationId=t},expression:"selectedLocationId"}}),n("v-btn",{attrs:{color:"validate"},on:{click:e.save}},[e._v(" Speichern ")])],1)},tt=[],nt={name:"EditLockForm",data:function(){return{name:"",owner:void 0,locations:[],selectedLocationId:void 0,nameRules:[function(e){return!!e||"Name erforderlich"}],selectRule:[function(e){return!!e||"Bitte Ort auswählen"}]}},mounted:function(){this.loadLocations()},methods:{save:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()||!e.selectedLocationId){t.next=6;break}return t.next=3,J;case 3:n=t.sent,a={name:e.name,owner:e.owner,location_id:e.selectedLocationId},n.lock_createLock(null,a).then((function(){e.$refs.form.reset(),e.$emit("submit"),e.$parent.$emit("save-form")}));case 6:case"end":return t.stop()}}),t)})))()},loadLocations:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J;case 2:n=t.sent,n.location_getLocations().then((function(t){e.locations=t.data}));case 4:case"end":return t.stop()}}),t)})))()}}},at=nt,rt=(0,s.Z)(at,et,tt,!1,null,"5a877f40",null),ot=rt.exports;u()(rt,{VBtn:D.Z,VForm:Y.Z,VSelect:xe.Z,VTextField:ee.Z});var it=a.Z.extend({name:"AllLocksView",components:{AppNavBar:ie,AppTitle:Z,LockTable:Ye,FormPopup:E,EditLockForm:ot}}),lt=it,st=(0,s.Z)(lt,Je,Ue,!1,null,"7f2da6c2",null),ct=st.exports;u()(st,{VDivider:ye.Z});var ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home pb-5"},[n("app-title",{attrs:{"view-title":"Orte"}}),n("app-nav-bar"),n("location-table",{ref:"locationTable",staticClass:"mx-8 my-8"}),n("v-divider",{staticClass:"mx-8"}),n("form-popup",{attrs:{text:"Ort hinzufügen"}},[n("edit-location-form",{staticClass:"mx-8 my-4",on:{submit:function(t){return e.$refs.locationTable.loadData()}}})],1)],1)},dt=[],ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{ref:"table",staticClass:"elevation-1",attrs:{headers:e.headers,items:e.tableData,"items-per-page":25,loading:e.loading,"loading-text":"Lade Daten..."}})},mt=[],vt={name:"LocationTable",data:function(){return{loading:!0,headers:[{text:"Ort",value:"name"},{text:"Adresse",value:"address"},{text:"Anzahl Tresore",value:"amount_safes"},{text:"Anzahl Schlösser",value:"amount_locks"}],tableData:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.id,t.next=3,J;case 3:a=t.sent,n?a.location_getLocation(n).then((function(t){e.tableData=[t.data]})).finally((function(){e.loading=!1})):a.location_getLocations().then((function(t){e.tableData=t.data,e.loading=!1})).finally((function(){e.loading=!1}));case 5:case"end":return t.stop()}}),t)})))()}}},pt=vt,ht=(0,s.Z)(pt,ft,mt,!1,null,null,null),gt=ht.exports;u()(ht,{VDataTable:de.Z});var bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form"},[n("v-text-field",{attrs:{label:"Name",rules:e.nameRules,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{label:"Adresse"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),n("v-text-field",{attrs:{label:"Breitengrad (latitude)"},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}}),n("v-text-field",{attrs:{label:"Längengrad (longitude)"},model:{value:e.lon,callback:function(t){e.lon=t},expression:"lon"}}),n("v-btn",{attrs:{color:"validate"},on:{click:e.save}},[e._v(" Speichern ")])],1)},xt=[],kt={name:"AddLocationForm",data:function(){return{name:"",address:void 0,lat:void 0,lon:void 0,nameRules:[function(e){return!!e||"Name erforderlich"}]}},methods:{save:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=6;break}return t.next=3,J;case 3:n=t.sent,a={name:e.name,address:e.address,latitude:e.lat,longitude:e.log},n.location_createLocation(null,a).then((function(){e.$refs.form.reset(),e.$emit("submit"),e.$parent.$emit("save-form")}));case 6:case"end":return t.stop()}}),t)})))()}}},_t=kt,wt=(0,s.Z)(_t,bt,xt,!1,null,"b1138b68",null),Zt=wt.exports;u()(wt,{VBtn:D.Z,VForm:Y.Z,VTextField:ee.Z});var yt=a.Z.extend({name:"AllLocationsView",components:{FormPopup:E,EditLocationForm:Zt,AppNavBar:ie,AppTitle:Z,LocationTable:gt}}),St=yt,Lt=(0,s.Z)(St,ut,dt,!1,null,"05ecbc08",null),$t=Lt.exports;u()(Lt,{VDivider:ye.Z}),a.Z.use(p.Z);var Tt=[{path:"/keys/:id?",alias:"/",name:"keys",component:Le},{path:"/safe/:id?",name:"safe",component:qe},{path:"/lock/:id?",name:"lock",component:ct},{path:"/location/:id?",name:"location",component:$t}],It=new p.Z({mode:"history",base:"/",routes:Tt}),Dt=It,Rt=n(39132);a.Z.use(Rt.Z);var Vt=new Rt.Z({});a.Z.config.productionTip=!1,new a.Z({router:Dt,vuetify:Vt,render:function(e){return e(v)}}).$mount("#app")},33471:function(){},52361:function(){},94616:function(){}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,o){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],o=e[u][2];for(var l=!0,s=0;s<a.length;s++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(l=!1,o<i&&(i=o));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,r,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,i=a[0],l=a[1],s=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var u=s(n)}for(t&&t(a);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[i[c]]=0;return n.O(u)},a=self["webpackChunkkeywi"]=self["webpackChunkkeywi"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(91770)}));a=n.O(a)})();
//# sourceMappingURL=app-legacy.d5274c26.js.map